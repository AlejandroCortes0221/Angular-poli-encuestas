<div class="p-6 max-w-5xl mx-auto bg-white shadow rounded-lg">

  <h2 class="text-2xl font-bold mb-4">Reporte de la Encuesta</h2>

  <div class="flex gap-4 mb-6">
    <button class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 cursor-pointer"
            (click)="descargarCSV()">
      Descargar CSV
    </button>
    <button class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 cursor-pointer"
            (click)="descargarPDF()">
      Descargar PDF
    </button>
  </div>

  <div class="mt-6">
    @for (pregunta of reporte(); track pregunta.texto) {
      <div class="mb-4 p-3 border rounded bg-gray-50">
        <h3 class="font-semibold mb-2">{{ pregunta.texto }}</h3>

        @if (pregunta.tipo === 'multiple') {
          <p>Opción más usada: <strong>{{ pregunta.masUsada }}</strong></p>
          <p>Opciones seleccionadas por los usuarios:</p>
          <ul class="ml-4 list-disc">
            @for (resp of pregunta.respuestas; track resp) {
              <li>{{ resp }}</li>
            }
          </ul>
        } @else if (pregunta.tipo === 'texto') {
          <p>Comentarios de los usuarios:</p>
          <ul class="ml-4 list-disc">
            @for (resp of pregunta.respuestas; track resp) {
              <li>{{ resp }}</li>
            }
          </ul>
        }
      </div>
    }
  </div>

</div>
<loading [type]="popupType" [message]="popupMessage()"></loading>